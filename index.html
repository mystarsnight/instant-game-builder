<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Instant Game Builder â€“ No Rules Mode</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#b3d9ff}
#app{max-width:1100px;margin:auto;background:#fff;padding:12px;border-radius:12px}
textarea,button,input{width:100%;padding:10px;margin:6px 0;border-radius:8px;font-size:14px}
button{background:#4caf50;color:#fff;border:none;cursor:pointer}
button.small{width:auto;padding:6px 10px;font-size:12px}
#game{height:420px;background:#e3f2fd;border-radius:10px;position:relative;overflow:hidden}
.entity{width:48px;height:48px;position:absolute;user-select:none}
.player{background:#1e88e5;border-radius:10px}
.enemy{background:#e53935;border-radius:50%}
.coin{background:gold;border-radius:50%}
.bullet{background:#000;width:10px;height:10px;border-radius:50%}
#hud{margin-top:6px;font-weight:bold}
#joystick{position:absolute;bottom:10px;left:10px;width:120px;height:120px;border-radius:50%;background:rgba(0,0,0,.2);display:none}
#stick{width:50px;height:50px;border-radius:50%;background:#333;position:absolute;left:35px;top:35px}
</style>
</head>
<body>
<div id="app">
<h2>Instant Game Builder â€“ ZERO RULES</h2>

<input id="aiInput" placeholder="Describe ANY game (fps, platformer, coins, bosses, levels, timer, anything)">
<button onclick="generateGame()">ðŸ¤– Generate & Play Game</button>
<button onclick="saveGame()">ðŸ’¾ Save</button>
<button onclick="copyLink()">ðŸ”— Copy Link</button>
<button onclick="exportRoblox()">ðŸŽ® Export Roblox</button>

<div id="game">
  <div id="joystick"><div id="stick"></div></div>
</div>
<div id="hud"></div>
<h3>My Games</h3>
<div id="library"></div>
</div>

<script>
/* CORE STATE */
const game=document.getElementById('game')
const hud=document.getElementById('hud')
const aiInput=document.getElementById('aiInput')
const joystick=document.getElementById('joystick')
const stick=document.getElementById('stick')
let player,enemies=[],coins=[],bullets=[],score=0,health=100,level=1,goal=10,keys={},touchDir={x:0,y:0}

/* INPUT */
window.onkeydown=e=>keys[e.key]=true
window.onkeyup=e=>keys[e.key]=false

joystick.addEventListener('touchstart',e=>e.preventDefault())
joystick.addEventListener('touchmove',e=>{
  const r=joystick.getBoundingClientRect()
  const t=e.touches[0]
  let x=t.clientX-r.left-60
  let y=t.clientY-r.top-60
  x=Math.max(-40,Math.min(40,x))
  y=Math.max(-40,Math.min(40,y))
  stick.style.left=60+x-25+'px'
  stick.style.top=60+y-25+'px'
  touchDir={x:x/40,y:y/40}
})
joystick.addEventListener('touchend',()=>{stick.style.left='35px';stick.style.top='35px';touchDir={x:0,y:0}})

/* GAME LOOP */
setInterval(()=>{
  if(!player) return
  let vx=(keys.ArrowRight?1:0)-(keys.ArrowLeft?1:0)+touchDir.x
  let vy=(keys.ArrowDown?1:0)-(keys.ArrowUp?1:0)+touchDir.y
  move(player,vx*4,vy*4)

  enemies.forEach(e=>{
    chase(e,player,1.5+level*0.2)
    if(collide(e,player)){health-=1}
  })

  bullets.forEach(b=>{
    move(b,8,0)
    enemies.forEach((e,i)=>{if(collide(b,e)){e.remove();enemies.splice(i,1);b.remove()}})
  })

  coins.forEach((c,i)=>{if(collide(c,player)){score++;c.remove();coins.splice(i,1)}})

  if(score>=goal){level++;spawnWave()}
  if(health<=0){hud.innerText='GAME OVER';player=null}
  hud.innerText=`Score ${score}/${goal} | Health ${health} | Level ${level}`
},30)

/* HELPERS */
function ent(cls,x,y){const d=document.createElement('div');d.className='entity '+cls;d.style.left=x+'px';d.style.top=y+'px';game.appendChild(d);return d}
function move(o,x,y){o.style.left=o.offsetLeft+x+'px';o.style.top=o.offsetTop+y+'px'}
function chase(e,p,s){let dx=p.offsetLeft-e.offsetLeft,dy=p.offsetTop-e.offsetTop;let d=Math.hypot(dx,dy)||1;e.style.left=e.offsetLeft+dx/d*s+'px';e.style.top=e.offsetTop+dy/d*s+'px'}
function collide(a,b){return Math.abs(a.offsetLeft-b.offsetLeft)<40&&Math.abs(a.offsetTop-b.offsetTop)<40}

/* GENERATOR (NO RULES AT ALL) */
function generateGame(){
  game.querySelectorAll('.entity').forEach(e=>e.remove())
  enemies=[];coins=[];bullets=[];score=0;health=100;level=1
  player=ent('player',200,200)

  const t=aiInput.value.toLowerCase()
  goal=t.includes('100')?100:t.includes('50')?50:10

  if('ontouchstart' in window) joystick.style.display='block'

  spawnWave()
}

function spawnWave(){
  for(let i=0;i<level+2;i++) enemies.push(ent('enemy',Math.random()*350,Math.random()*300))
  for(let i=0;i<level+3;i++) coins.push(ent('coin',Math.random()*350,Math.random()*300))
}

window.onclick=()=>{
  if(!player) return
  const b=ent('bullet',player.offsetLeft+40,player.offsetTop+20)
  bullets.push(b)
}

/* SAVE */
function getGames(){return JSON.parse(localStorage.getItem('games')||'[]')}
function setGames(g){localStorage.setItem('games',JSON.stringify(g))}
function saveGame(){const n=prompt('Game name');if(!n)return;const g=getGames();g.push({id:Date.now(),name:n,data:aiInput.value});setGames(g);loadGames()}
function loadGames(){library.innerHTML='';getGames().forEach(g=>{const d=document.createElement('div');d.innerHTML=`<b>${g.name}</b>`;d.append(btn('Play',()=>{aiInput.value=g.data;generateGame()}),btn('Delete',()=>{setGames(getGames().filter(x=>x.id!==g.id));loadGames()}));library.appendChild(d)})}
function btn(t,f){const b=document.createElement('button');b.className='small';b.innerText=t;b.onclick=f;return b}
loadGames()

/* SHARE */
function copyLink(){navigator.clipboard.writeText(location.href.split('?')[0]+'?g='+btoa(aiInput.value))}
const q=new URLSearchParams(location.search);if(q.get('g')){aiInput.value=atob(q.get('g'));generateGame()}

/* ROBLOX EXPORT */
function exportRoblox(){
  const lua=`-- Generated Game\nprint('Score based action game')`
  const a=document.createElement('a');a.href=URL.createObjectURL(new Blob([lua],{type:'text/plain'}));a.download='Game.lua';a.click()
}
</script>
</body>
</html>
