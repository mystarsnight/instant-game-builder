<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Instant Game Builder</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#b3d9ff;margin:0;padding:10px}
#app{background:#fff;border-radius:12px;padding:12px;max-width:900px;margin:auto}
textarea,button{width:100%;padding:10px;margin:6px 0;border-radius:8px}
button{background:#4caf50;color:#fff;border:none}
#game{height:320px;background:#e3f2fd;border-radius:10px;position:relative;overflow:hidden}
.obj{position:absolute;width:50px;height:50px;border-radius:10px;
display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold}
#stats{margin-top:6px;font-weight:bold}
.notice{display:none;background:#222;color:#fff;padding:8px;border-radius:6px}
#mobile{text-align:center;margin-top:6px}
#mobile button{width:60px}
</style>
</head>
<body>

<div id="app">
<h2>Instant Game Builder</h2>
<div id="notice" class="notice"></div>

<textarea id="input" rows="5" placeholder="Describe your game or write rules"></textarea>

<button onclick="aiMakeGame()">ðŸ¤– AI Make Game</button>
<button onclick="build()">â–¶ Play</button>
<button onclick="exportRoblox()">ðŸŽ® Export Roblox World</button>

<div id="game"></div>
<div id="stats"></div>

<div id="mobile">
<button onclick="mv(0,-6)">â¬†</button><br>
<button onclick="mv(-6,0)">â¬…</button>
<button onclick="mv(0,6)">â¬‡</button>
<button onclick="mv(6,0)">âž¡</button>
</div>
</div>

<script>
const game=document.getElementById('game')
const input=document.getElementById('input')
const stats=document.getElementById('stats')
const notice=document.getElementById('notice')

let rules=[],objs={},score=0,win=10,health=3,keys={}

function msg(t){notice.innerText=t;notice.style.display='block';setTimeout(()=>notice.style.display='none',2500)}

/* ===== SMART AI ===== */
function aiMakeGame(){
 const p=prompt("Describe your game")
 if(!p) return
 const t=p.toLowerCase()
 let r=[]

 r.push("spawn player")
 r.push("press arrow move player")

 if(t.match(/coin|gem|collect|point/)){
  r.push("spawn coin")
  r.push("click coin gain 1")
 }

 if(t.match(/enemy|monster|avoid|dodge/)){
  r.push("spawn enemy")
  r.push("enemy follow player")
  r.push("touch enemy lose 1")
 }

 if(t.match(/survive|time/)){
  r.push("timer 60")
  r.push("survive to win")
 }

 const n=t.match(/\d+/)
 r.push("score to win "+(n?n[0]:10))

 input.value=r.join("\n")
 build()
 msg("AI built a working game")
}

/* ===== GAME ENGINE ===== */
function build(){
 game.innerHTML=''
 objs={}
 score=0;health=3;win=10

 rules=input.value.split("\n").map(x=>x.trim()).filter(Boolean)

 rules.forEach(r=>{
  if(r.startsWith("spawn")) spawn(r.split(" ")[1])
  if(r.startsWith("score to win")) win=parseInt(r.split(" ").pop())
 })
 update()
}

function spawn(n){
 const d=document.createElement("div")
 d.className="obj"
 d.innerText=n[0].toUpperCase()
 d.style.background=color(n)
 d.style.left=Math.random()*80+"%"
 d.style.top=Math.random()*80+"%"
 game.appendChild(d)
 objs[n]=d

 d.onclick=()=>{
  if(rules.includes("click "+n+" gain 1")) score++
  update()
 }
}

function color(t){
 const c=["#f44336","#2196f3","#4caf50","#ff9800","#9c27b0"]
 let h=0;for(let i of t)h+=i.charCodeAt(0)
 return c[h%c.length]
}

setInterval(()=>{
 if(objs.player && rules.includes("press arrow move player")){
  let p=objs.player
  if(keys.ArrowLeft)p.style.left=p.offsetLeft-5+"px"
  if(keys.ArrowRight)p.style.left=p.offsetLeft+5+"px"
  if(keys.ArrowUp)p.style.top=p.offsetTop-5+"px"
  if(keys.ArrowDown)p.style.top=p.offsetTop+5+"px"
 }
 if(objs.enemy && rules.includes("enemy follow player")){
  let e=objs.enemy,p=objs.player
  e.style.left=e.offsetLeft+(p.offsetLeft>e.offsetLeft?1:-1)+"px"
  e.style.top=e.offsetTop+(p.offsetTop>e.offsetTop?1:-1)+"px"
 }
},40)

window.onkeydown=e=>keys[e.key]=true
window.onkeyup=e=>keys[e.key]=false

function mv(x,y){
 if(objs.player){
  objs.player.style.left=objs.player.offsetLeft+x+"px"
  objs.player.style.top=objs.player.offsetTop+y+"px"
 }
}

function update(){
 if(score>=win){
  stats.innerText="YOU WIN ðŸŽ‰"
 }else{
  stats.innerText=`Score: ${score}/${win}`
 }
}

/* ===== ROBLOX WORLD EXPORT ===== */
function exportRoblox(){
 let lua=`
-- AUTO GENERATED ROBLOX WORLD
local Players=game:GetService("Players")

local function makePart(name,color,pos)
 local p=Instance.new("Part")
 p.Name=name
 p.Size=Vector3.new(4,4,4)
 p.Position=pos
 p.Anchored=true
 p.Color=color
 p.Parent=workspace
 return p
end

local coin=makePart("Coin",Color3.new(1,1,0),Vector3.new(0,4,0))
coin.Touched:Connect(function(hit)
 local hum=hit.Parent:FindFirstChild("Humanoid")
 if hum then
  print("Coin collected")
  coin:Destroy()
 end
end)

local enemy=makePart("Enemy",Color3.new(1,0,0),Vector3.new(20,4,0))

game:GetService("RunService").Heartbeat:Connect(function()
 for _,plr in pairs(Players:GetPlayers()) do
  if plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
   enemy.Position=enemy.Position:Lerp(plr.Character.HumanoidRootPart.Position,0.01)
  end
 end
end)
`
 const a=document.createElement("a")
 a.href=URL.createObjectURL(new Blob([lua],{type:"text/plain"}))
 a.download="RobloxWorld.lua"
 a.click()
}
</script>
</body>
</html>
